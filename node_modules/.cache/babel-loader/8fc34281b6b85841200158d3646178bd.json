{"ast":null,"code":"var _jsxFileName = \"/Users/winniebran/Desktop/Kenzie-Academy/Entregas-Kenzie/Modulo3/sprint5/react-entrega-kenzie-hub-winniebran/src/contexts/TechsContext.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useContext, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { ApiRequests } from \"../services/ApiRequests\";\nimport { UserContext } from \"./UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TechsContext = /*#__PURE__*/createContext({});\nexport const TechsProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditAndDeleteModal, setShowEditAndDeleteModal] = useState(false);\n  const [currentTech, setCurrentTech] = useState(null);\n\n  const addTechsModal = async data => {\n    try {\n      const response = await ApiRequests.post(\"/users/techs\", data);\n      toast.success(\"Tecnologia criada com sucesso.\");\n      setShowAddModal(false); //Mantenho as informações do usuário e adiciono uma nova tech as techs que já existem desse usuário\n\n      if (user) {\n        setUser({ ...user,\n          techs: [...user.techs, response.data]\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Essa tecnologia já foi criada, é possível editá-la.\");\n    }\n  };\n\n  const editTechsModal = async (data, id) => {\n    try {\n      await ApiRequests.put(`/users/techs/${id}`, data);\n      toast.success(\"Tecnologia editada com sucesso.\");\n      setShowEditAndDeleteModal(false); // Utilizei o map para criar uma nova lista editando somente o item selecionado\n\n      if (user) {\n        const newTechs = user.techs.map(tech => {\n          // Edito o item que tem id identico ao que eu cliquei\n          if (tech.id === id) {\n            //Mantenho todas as informações da tecnologia identicas com exceção do status\n            return { ...tech,\n              status: data.status\n            };\n          } else {\n            //Matenho todas as outras tecnologias da lista como estão\n            return tech;\n          }\n        }); // Atualizei techs inserindo a nova lista\n\n        setUser({ ...user,\n          techs: newTechs\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Tecnologia não pôde ser editada\");\n    }\n  };\n\n  const deleteTechsModal = async id => {\n    try {\n      await ApiRequests.delete(`/users/techs/${id}`);\n      toast.success(\"Tecnologia excluída com sucesso.\");\n      setShowEditAndDeleteModal(false); // Utilizei o filter para criar uma nova lista removendo o item selecionado\n\n      if (user) {\n        const newTechs = user.techs.filter(tech => tech.id !== id); // Atualizei techs inserindo a nova lista\n\n        setUser({ ...user,\n          techs: newTechs\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Tecnologia não pôde ser excluída\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TechsContext.Provider, {\n    value: {\n      addTechsModal,\n      editTechsModal,\n      deleteTechsModal,\n      showAddModal,\n      setShowAddModal,\n      showEditAndDeleteModal,\n      setShowEditAndDeleteModal,\n      currentTech,\n      setCurrentTech\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TechsProvider, \"NRa+gP7cslzBZM2OCeXQPkcJbnU=\");\n\n_c = TechsProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TechsProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","toast","ApiRequests","UserContext","TechsContext","TechsProvider","children","user","setUser","showAddModal","setShowAddModal","showEditAndDeleteModal","setShowEditAndDeleteModal","currentTech","setCurrentTech","addTechsModal","data","response","post","success","techs","error","console","log","editTechsModal","id","put","newTechs","map","tech","status","deleteTechsModal","delete","filter"],"sources":["/Users/winniebran/Desktop/Kenzie-Academy/Entregas-Kenzie/Modulo3/sprint5/react-entrega-kenzie-hub-winniebran/src/contexts/TechsContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { iTechs } from \"../Pages/Dashboard/Modal/AddModal/AddTechModal\";\nimport { ApiRequests } from \"../services/ApiRequests\";\nimport { UserContext } from \"./UserContext\";\n\ninterface iChildren {\n  children: React.ReactNode;\n}\n\ninterface iTechsContextProps {\n  addTechsModal: (data: iTechs) => void;\n  editTechsModal: (data: iTechs, id: string) => void;\n  deleteTechsModal: (id: string) => void;\n  showAddModal: boolean;\n  setShowAddModal: React.Dispatch<React.SetStateAction<boolean>>;\n  showEditAndDeleteModal: boolean;\n  setShowEditAndDeleteModal: React.Dispatch<React.SetStateAction<boolean>>;\n  currentTech: iTechs | null;\n  setCurrentTech: React.Dispatch<React.SetStateAction<iTechs | null>>;\n}\n\nexport const TechsContext = createContext({} as iTechsContextProps);\n\nexport const TechsProvider = ({ children }: iChildren) => {\n  const { user, setUser } = useContext(UserContext);\n\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditAndDeleteModal, setShowEditAndDeleteModal] = useState(false);\n  const [currentTech, setCurrentTech] = useState<iTechs | null>(null);\n\n  const addTechsModal = async (data: iTechs) => {\n    try {\n      const response = await ApiRequests.post(\"/users/techs\", data);\n      toast.success(\"Tecnologia criada com sucesso.\");\n      setShowAddModal(false);\n      //Mantenho as informações do usuário e adiciono uma nova tech as techs que já existem desse usuário\n      if (user) {\n        setUser({ ...user, techs: [...user.techs, response.data] });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Essa tecnologia já foi criada, é possível editá-la.\");\n    }\n  };\n\n  const editTechsModal = async (data: iTechs, id: string) => {\n    try {\n      await ApiRequests.put(`/users/techs/${id}`, data);\n      toast.success(\"Tecnologia editada com sucesso.\");\n      setShowEditAndDeleteModal(false);\n      // Utilizei o map para criar uma nova lista editando somente o item selecionado\n      if (user) {\n        const newTechs = user.techs.map((tech: iTechs) => {\n          // Edito o item que tem id identico ao que eu cliquei\n          if (tech.id === id) {\n            //Mantenho todas as informações da tecnologia identicas com exceção do status\n            return { ...tech, status: data.status };\n          } else {\n            //Matenho todas as outras tecnologias da lista como estão\n            return tech;\n          }\n        });\n        // Atualizei techs inserindo a nova lista\n        setUser({ ...user, techs: newTechs });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Tecnologia não pôde ser editada\");\n    }\n  };\n\n  const deleteTechsModal = async (id: string) => {\n    try {\n      await ApiRequests.delete(`/users/techs/${id}`);\n      toast.success(\"Tecnologia excluída com sucesso.\");\n      setShowEditAndDeleteModal(false);\n      // Utilizei o filter para criar uma nova lista removendo o item selecionado\n      if (user) {\n        const newTechs = user.techs.filter((tech: iTechs) => tech.id !== id);\n        // Atualizei techs inserindo a nova lista\n        setUser({ ...user, techs: newTechs });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Tecnologia não pôde ser excluída\");\n    }\n  };\n\n  return (\n    <TechsContext.Provider\n      value={{\n        addTechsModal,\n        editTechsModal,\n        deleteTechsModal,\n        showAddModal,\n        setShowAddModal,\n        showEditAndDeleteModal,\n        setShowEditAndDeleteModal,\n        currentTech,\n        setCurrentTech,\n      }}\n    >\n      {children}\n    </TechsContext.Provider>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}